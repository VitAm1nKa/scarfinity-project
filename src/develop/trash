    const params = qs.parse(ownProps.location.search, {ignoreQueryPrefix: true});
    const productInfo = state.products.find(x => x.id === ownProps.productId);

    return Object.assign({}, ownProps, {
        images: productInfo.images.list, // Далее будет images.find(x => x.colorId == ownProps.colorId)
        galleryPhotoId: params.z,
        gallerySubQuery: (photoId) => `${ownProps.location.pathname}${qs.stringify(Object.assign({}, params, {z: photoId}), {addQueryPrefix: true})}`,
        galleryClose: () => {
            const link = `${ownProps.location.pathname}${qs.stringify(Object.assign({}, params, {z: undefined}), {addQueryPrefix: true})}`;
            ownProps.history.push(link);
        },
    });
}



const style = {
    button: {
        width: 26,
        height: 30,
        padding: 3,
    }
}

class ProductCardImageBlockView extends React.Component {
	constructor(props) {
		super(props);

		this.state = {
			imageData: props.imageData,
			selectedIndex: 0,
			directionRow: props.directionRow,
			galeryRef: props.galeryRef,
			location: props.location,
			zGallery: this.checkOpenGallery(props.location),
		}

		this.checkOpenGallery(this.state.location);

		this.handleIndexChange = this.handleIndexChange.bind(this);
	}

	componentWillReceiveProps(nextProps) {
		this.state.zGallery = this.checkOpenGallery(nextProps.location);
		this.setState(nextProps);
	}

	handleIndexChange(index) {
		console.log(index);
		this.setState({
			selectedIndex: index,
		});
	}

	checkOpenGallery(location) {
		if(location) {
			const query = parse(location.search.substr(1));
			if(query.z) {
				return true;
			}
		}

		return false;
	}

	render() {
		console.log(this.state.location, this.state.selectedIndex);
		return(
			<div className="product-card-image-container">
				<div className="product-card-image-container__main">
					{
						this.state.imageData && this.state.location &&
						<Link to={`${this.state.location.pathname}?z=${this.state.selectedIndex}`}>
							<Utility__ImageContainer
								imageUrl={this.state.imageData.list[this.state.selectedIndex].main} />
						</Link>
					}
				</div>
				{
					this.state.imageData.list && this.state.imageData.list.length > 0 &&
					<div 
						className="product-card-image-container__galery"
						ref={this.state.galeryRef}
						>
						{
							this.state.directionRow 
							? <ItemGridHorisontal
								selectedIndex={this.state.selectedIndex}
								items={this.state.imageData.list}
								onIndexChange={this.handleIndexChange}/>
							: <ItemGridVertical
								selectedIndex={this.state.selectedIndex}
								items={this.state.imageData.list}
								onIndexChange={this.handleIndexChange}/>

						}
					</div>
				}
				{
					this.state.zGallery && this.state.location &&
					<ImageGallery
						images={this.state.imageData.list}
						location={this.state.location}
						currentIndex={this.state.selectedIndex}/>
				}
			</div>
		)
	}
}
ProductCardImageBlockView.defaultProps = {
	directionRow: true,
	galeryRef: null,
	imageData: null,
	location: null,
}





        let b = new google.maps.LatLngBounds(
            new google.maps.LatLng(82.74051600000007, 83.15829389999999),
            new google.maps.LatLng(54.800147, 55.139807)
        );
        const center = b.getCenter();
        const ne = b.getNorthEast();

        console.log(center.lat(), ne);
        console.log(b);

        // r = radius of the earth in statute miles
        var r = 6378.8;  

        // Convert lat or lng from decimal degrees into radians (divide by 57.2958)
        var lat1 = center.lat() / 57.2958; 
        var lon1 = center.lng() / 57.2958;
        var lat2 = ne.lat() / 57.2958;
        var lon2 = ne.lng() / 57.2958;

        // distance = circle radius from center to Northeast corner of bounds
        var dis = r * Math.acos(Math.sin(lat1) * Math.sin(lat2) + 
        Math.cos(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1));

        // var radius = google.maps.geometry.spherical.computeDistanceBetween(center, ne);

        console.log(dis);

        // 72530409b791f68a996ff3d0835f10ca2e1f0f8a
        let addressOptions = {
            componentRestrictions: {
                country: "ru",
                location: `${center.lat()}, ${center.lng()}`,
                radius: 500,
                strictBounds: true,
            }
            // bounds: b,
            // strictBounds: true,
            // componentRestrictions: {locality: "72530409b791f68a996ff3d0835f10ca2e1f0f8a"},
        }             
             
             
             
             
             
             
             
             
             
             
             
             
             
                // if(caret >= 5 && caret <= 7) {
                //     this.state.values = this.removeFromArray(this.state.values, caret - 5);
                //     this.input.value = this.updateValue(this.state.values.length);
                //     this.input.selectionStart = caret - 1;
                //     this.input.selectionEnd = caret - 1;
                // }
                // if(caret >= 8 && caret <= 9) {
                //     this.state.values = this.removeFromArray(this.state.values, 2);
                //     this.input.value = this.updateValue(this.state.values.length);
                //     this.input.selectionStart = caret - 1;
                //     this.input.selectionEnd = caret - 1;
                // }
                // if(caret >= 10 && caret <= 12) {
                //     this.state.values = this.removeFromArray(this.state.values, caret - 7);
                //     this.input.value = this.updateValue(this.state.values.length);
                //     this.input.selectionStart = caret - 1;
                //     this.input.selectionEnd = caret - 1;
                // }
                // if(caret == 13) {
                //     this.state.values = this.removeFromArray(this.state.values, 5);
                //     this.input.value = this.updateValue(this.state.values.length);
                //     this.input.selectionStart = caret - 1;
                //     this.input.selectionEnd = caret - 1;
                // }
                // if(caret >= 14 && caret <= 15) {
                //     this.state.values = this.removeFromArray(this.state.values, caret - 8);
                //     this.input.value = this.updateValue(this.state.values.length);
                //     this.input.selectionStart = caret - 1;
                //     this.input.selectionEnd = caret - 1;
                // }
                // if(caret == 16) {
                //     this.state.values = this.removeFromArray(this.state.values, 7);
                //     this.input.value = this.updateValue(this.state.values.length);
                //     this.input.selectionStart = caret - 1;
                //     this.input.selectionEnd = caret - 1;
                // }
                // if(caret >= 17 && caret <= 18) {
                //     this.state.values = this.removeFromArray(this.state.values, caret - 9);
                //     this.input.value = this.updateValue(this.state.values.length);
                //     this.input.selectionStart = caret - 1;
                //     this.input.selectionEnd = caret - 1;
                // }


            if(caret === 3) {
                this.state.values = this.insertIntoArray(this.state.values, 0, Number(event.nativeEvent.key));
                this.input.value = this.updateValue(this.state.values.length);
            }
            if(caret >= 4 && caret <= 6) {
                this.state.values = this.insertIntoArray(this.state.values, caret - 4, Number(event.nativeEvent.key));
                this.input.value = this.updateValue(this.state.values.length);
            }
            if(caret >= 7 && caret <= 9) {
                this.state.values = this.insertIntoArray(this.state.values, 3, Number(event.nativeEvent.key));
                this.input.value = this.updateValue(this.state.values.length);
            }
            if(caret >= 10 && caret <= 11) {
                this.state.values = this.insertIntoArray(this.state.values, caret - 6, Number(event.nativeEvent.key)); // 5
                this.input.value = this.updateValue(this.state.values.length);
            }
            if(caret >= 12 && caret <= 13) {
                this.state.values = this.insertIntoArray(this.state.values, 6, Number(event.nativeEvent.key));
                this.input.value = this.updateValue(this.state.values.length);
            }
            if(caret == 14) {
                this.state.values = this.insertIntoArray(this.state.values, 7, Number(event.nativeEvent.key));
                this.input.value = this.updateValue(this.state.values.length);
            }
            if(caret >= 15 && caret <= 16) {
                this.state.values = this.insertIntoArray(this.state.values, 8, Number(event.nativeEvent.key));
                this.input.value = this.updateValue(this.state.values.length);
            }
            if(caret == 17) {
                this.state.values = this.insertIntoArray(this.state.values, 9, Number(event.nativeEvent.key));
                this.input.value = this.updateValue(this.state.values.length);
            }

            event.stopPropagation();
            event.preventDefault();
            return false;








// import Cart__ProductSection from './Cart__ProductSection.jsx';
// import Utitlity__SelectBox from '../utility/Utility__SelectBox.jsx';
// import Utility__AutocompleteBox from '../utility/Utility__AutocompleteBox.jsx';
// import Utility__RaitingBox from '../utility/Utility__RaitingBox.jsx';
// import Review from '../review/Review.jsx';
// import ReviewAndOtherSection from '../review/ReviewAndOtherSection.jsx';
// import ProductCard from '../catalog/ProductCard.jsx';
// import CatalogGrid from '../catalog/CatalogGrid.jsx';
// import Mobile__HeaderNavigation from '../navigation/Mobile__HeaderNavigation.jsx';
// import OfferGrid from '../other/Offer.jsx';
// import RecenlyViewed__Shell from '../catalog/RecenlyViewed.jsx';
// import {RecenlyViewedBlock, ProductBlock} from '../catalog/RecenlyViewed.jsx';
// import Footer from '../navigation/Footer.jsx';

{/* <RecenlyViewedBlock />
<OfferGrid /> */}

//loadData: (productId) => dispatch(getProduct(productId))
// addItem: (productId, count) => {dispatch(addItem(productId, count))},



                {/*<Mobile__HeaderNavigation />*/}
                {/* <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Deserunt dolor, delectus nesciunt impedit. Commodi eligendi voluptate nulla nobis numquam dignissimos reiciendis quaerat, possimus perspiciatis dolores sunt at consectetur quia beatae!
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Deserunt dolor, delectus nesciunt impedit. Commodi eligendi voluptate nulla nobis numquam dignissimos reiciendis quaerat, possimus perspiciatis dolores sunt at consectetur quia beatae!
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Deserunt dolor, delectus nesciunt impedit. Commodi eligendi voluptate nulla nobis numquam dignissimos reiciendis quaerat, possimus perspiciatis dolores sunt at consectetur quia beatae!
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Deserunt dolor, delectus nesciunt impedit. Commodi eligendi voluptate nulla nobis numquam dignissimos reiciendis quaerat, possimus perspiciatis dolores sunt at consectetur quia beatae!
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Deserunt dolor, delectus nesciunt impedit. Commodi eligendi voluptate nulla nobis numquam dignissimos reiciendis quaerat, possimus perspiciatis dolores sunt at consectetur quia beatae!
                </p> */}

                {/* <RecenlyViewed__Shell /> */}
                {/* <ProductBlock />

                <div>
                    <ProductCard />
                </div> */}

                {/* <RecenlyViewedBlock />

                <OfferGrid /> */}

                {/* <Footer /> */}

                {/*<div>
                    <FlatButton label="Secondary" secondary={true} onTouchTap={this.handleClick1}/>
                    <CatalogGrid items={this.state.items} />
                </div>

                <div>
                    <ProductCard />
                </div>

                <div>
                    <ReviewAndOtherSection reviewsData={this.reviewsData}/>
                </div>

                <div>
                    <Utility__RaitingBox currentValue={2.5}/>
                </div>

                <div style={{border: "1px solid #ccc", background: "#fefefe"}}>
                    <Review />
                </div>

                <div>
                    <FlatButton label="Validate" secondary={true} onTouchTap={this.handleClick1}/>
                </div>

                <div>
                    <Utility__AutocompleteBox 
                        defaultSection={"Недавние значения"}
                        defaultOptions={["Новосибирск", "Кемерово", "Омск"]}
                        options={["новосибирск", "москва", "новоросийск", "морянка"]}
                        errorTitle="Город не выбран"
                        sectionTitle="Выбор города"
                        doValidate={ref => (this.child = ref)} />
                </div>

                <div>
                    <Utitlity__SelectBox 
                        options={["Новосибирск","Москва","Санкт-Петербург", "Красноярск","Сочи"]}
                        selectedId={0}
                        placeholderTitle="Выберите город"
                        sectionTitle="Выбор города"
                        errorTitle="Город не выбран"
                        noElementsTitle="Нет элементов"
                        doValidate={ref => (this.child1 = ref)} />
                </div>*/}

        //         this.reviewsData = [
        //     {
        //         id: 1,
        //         title: "Первый",
        //         user: {
        //             name: "Михаил Силантьев",
        //             avatar: "https://avatars0.githubusercontent.com/u/18670623?v=3&s=460",
        //         },
        //         rating: 4,
        //         useful: {
        //             yes: 2,
        //             no: 10,
        //         },
        //         content: "Lorem ipsum dolor sit amet, consectetur adipisicing elit. Enim cupiditate deserunt ea. Eaque, excepturi corporis in hic suscipit autem, unde est dolor odit cupiditate ipsa eius amet alias velit. Autem.",
        //         date: "01.07.2017",
        //     },
        //     {
        //         id: 1,
        //         title: "Первый",
        //         user: {
        //             name: "Михаил Силантьев",
        //             avatar: "https://its-possible.ru/stars/symmetry/01anne-hathaway.jpg",
        //         },
        //         rating: 4,
        //         useful: {
        //             yes: 4,
        //             no: 10,
        //         },
        //         content: "Lorem ipsum dolor sit amet, consectetur adipisicing elit. Enim cupiditate deserunt ea. Eaque, excepturi corporis in hic suscipit autem, unde est dolor odit cupiditate ipsa eius amet alias velit. Autem.",
        //         date: "01.07.2017",
        //     },
        //     {
        //         id: 1,
        //         title: "Первый",
        //         user: {
        //             name: "Михаил Силантьев",
        //             avatar: "http://helpster.ru/pic/beauty/pic/64126/com/1737956.jpg",
        //         },
        //         rating: 4,
        //         useful: {
        //             yes: 2,
        //             no: 2,
        //         },
        //         content: "Lorem ipsum dolor sit amet, consectetur adipisicing elit. Enim cupiditate deserunt ea. Eaque, excepturi corporis in hic suscipit autem, unde est dolor odit cupiditate ipsa eius amet alias velit. Autem.",
        //         date: "01.07.2017",
        //     },
        //     {
        //         id: 1,
        //         title: "Первый",
        //         user: {
        //             name: "Михаил Силантьев",
        //             avatar: "http://www.fresher.ru/manager_content/02-2016/kak-by-vyglyadeli-zvyozdy-gollivuda-esli-by-ix-lica-byli-simmetrichnymi/20.jpg",
        //         },
        //         rating: 4,
        //         useful: {
        //             yes: 2,
        //             no: 11,
        //         },
        //         content: "Lorem ipsum dolor sit amet, consectetur adipisicing elit. Enim cupiditate deserunt ea. Eaque, excepturi corporis in hic suscipit autem, unde est dolor odit cupiditate ipsa eius amet alias velit. Autem.",
        //         date: "01.07.2017",
        //     },
        //     {
        //         id: 1,
        //         title: "Первый",
        //         user: {
        //             name: "Михаил Силантьев",
        //             avatar: "https://images4.cosmopolitan.ru/upload/img_cache/f2f/f2f5ec08823253c5035e2637a9780e8c_fitted_740x700.jpg",
        //         },
        //         rating: 4,
        //         useful: {
        //             yes: 2,
        //             no: 10,
        //         },
        //         content: "Lorem ipsum dolor sit amet, consectetur adipisicing elit. Enim cupiditate deserunt ea. Eaque, excepturi corporis in hic suscipit autem, unde est dolor odit cupiditate ipsa eius amet alias velit. Autem.",
        //         date: "01.07.2017",
        //     },
        //     {
        //         id: 1,
        //         title: "Первый",
        //         user: {
        //             name: "Михаил Силантьев",
        //             avatar: "http://www.kotilda.ru/uploads/pics/032.jpg",
        //         },
        //         rating: 4,
        //         useful: {
        //             yes: 2,
        //             no: 10,
        //         },
        //         content: "Lorem ipsum dolor sit amet, consectetur adipisicing elit. Enim cupiditate deserunt ea. Eaque, excepturi corporis in hic suscipit autem, unde est dolor odit cupiditate ipsa eius amet alias velit. Autem.",
        //         date: "01.07.2017",
        //     },
        //     {
        //         id: 1,
        //         title: "Первый",
        //         user: {
        //             name: "Михаил Силантьев",
        //             avatar: "http://www.infoniac.ru/upload/iblock/348/34893da6e6cea19df2e31dd9b42fba66.jpg",
        //         },
        //         rating: 4,
        //         useful: {
        //             yes: 2,
        //             no: 10,
        //         },
        //         content: "Lorem ipsum dolor sit amet, consectetur adipisicing elit. Enim cupiditate deserunt ea. Eaque, excepturi corporis in hic suscipit autem, unde est dolor odit cupiditate ipsa eius amet alias velit. Autem.",
        //         date: "01.07.2017",
        //     },
        //     {
        //         id: 1,
        //         title: "Первый",
        //         user: {
        //             name: "Михаил Силантьев",
        //             avatar: "http://img-fotki.yandex.ru/get/3414/smartmen-ru.0/0_91e6_dad5e211_L.jpg",
        //         },
        //         rating: 4,
        //         useful: {
        //             yes: 2,
        //             no: 10,
        //         },
        //         content: "Lorem ipsum dolor sit amet, consectetur adipisicing elit. Enim cupiditate deserunt ea. Eaque, excepturi corporis in hic suscipit autem, unde est dolor odit cupiditate ipsa eius amet alias velit. Autem.",
        //         date: "01.07.2017",
        //     }
        // ];